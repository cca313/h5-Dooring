{"version":3,"sources":["webpack:///./src/layouts/index.tsx","webpack:///./src/layouts/index.less","webpack:///./src/assets/dooring.png"],"names":["library","push","text","reg","useReg","children","useState","modalOpen","setModalOpen","callb","useCallback","v","setTimeout","returnValue","generateRespones","setList","prev","isUser","handleDeploy","window","open","useRegister","onOk","onCancel","title","width","paddingTop","marginTop","borderTop","color","fontSize","render","useEffect","setInterval","timeout","localStorage","getItem","Date","now","removeItem","info","content","okText","history","showVideo","zIndex","height","hackCodeStyle","location","pathname","indexOf","overflow","position","right","bottom","transition","padding","styles","dragPay","crouseBtn","mask","Dooring"],"mappings":"oUASAA,IAAQC,KAEN,CACEC,KAAM,QACNC,IAAK,OAEP,CACED,KACE,6BACE,uBAAG,KAAK,gCAAR,QACA,uBAAG,KAAK,gDAAR,gBAGJE,OAAQ,mBAIG,cAAoD,GAAlCC,GAAkC,EAAlCA,SAAkC,EAC/BC,mBAAS,IADsB,mBAC1DC,EAD0D,KAC/CC,EAD+C,KAE3DC,EAAQC,sBAAaC,IACzBC,WAAW,KAET,GAAIC,GAAcC,YAAiBH,GAC/BE,GAEFE,EAAQC,GAAQ,CAAC,GAAGA,EAAM,CAAEC,OAAQ,GAAOf,KAAMW,MAElD,MAEF,IAEGK,EAAe,KACnBC,OAAOC,KAAK,6DAfmD,EAkBvCC,YACxBd,EACAE,EACA,CACEa,KAAM,IAAMd,EAAa,IACzBe,SAAU,IAAMf,EAAa,IAC7BgB,MAAO,kBACPC,MAAO,KAET,GACA,sEAEE,yBAAK,MAAO,CAAEC,WAAY,OAAQC,UAAW,OAAQC,UAAW,sBAC9D,4CACA,6BACE,oCACiB,IACf,uBAAG,KAAK,0CAA0C,OAAO,UAAzD,mBAIF,oCACiB,IACf,uBAAG,KAAK,8DAA8D,OAAO,UAA7E,UAIF,2EAGA,yBAAK,MAAO,CAAEC,MAAO,QAArB,iCAGA,yBAAK,MAAO,CAAEC,SAAU,SAAxB,qCAGA,yBAAK,MAAO,CAAEA,SAAU,OAAQH,UAAW,SAA3C,KAEE,uBAAQ,KAAK,UAAU,QAAST,GAAhC,cAxDuD,mBAkB1Da,EAlB0D,KAkBlDhB,EAlBkD,KAiEjEiB,oBAAU,KACRC,YAAY,KACV,GAAMC,GAAU,CAACC,aAAaC,QAAQ,MAClCF,GAAWA,EAAUG,KAAKC,OAC5BH,cAAaI,WAAW,MACxB,IAAMC,KAAK,CACThB,MAAO,cACPiB,QAAS,qDACTC,OAAQ,KACRpB,OACEa,aAAaI,WAAW,MACxBJ,aAAaI,WAAW,YACxBI,IAAQ1C,KAAK,eAIlB,IAAO,KACT,IAEH,GAAM2C,GAAY,KAChB,IAAMJ,KAAK,CACThB,MAAO,eACPC,MAAO,IACPoB,OAAQ,IACRJ,QACE,yBAAK,MAAO,CAAEK,OAAQ,MACpB,4BACE,MAAO,CAAErB,MAAO,OAAQqB,OAAQ,QAChC,IAAI,yFACJ,UAAU,KACV,OAAO,IACP,YAAY,KACZ,aAAa,IACb,gBAAgB,QAEf,MAIPJ,OAAQ,UACRpB,YAIEyB,EACJ5B,OAAO6B,SAASC,SAASC,QAAQ,WAAa,EAC1C,CAAEJ,OAAQ,QACV,CAAEA,OAAQ,OAAQK,SAAU,QAClC,MACE,0BAAK,MAAOJ,GACV,yBACE,MAAO,CACLK,SAAU,QACVC,MAAO,GAAF,OAAK9C,EAAY,QAAU,QAChC+C,OAAQ,OACRC,WAAY,uBACZV,OAAQ,IAGV,uBACE,KAAK,UACL,MAAO,CAAEW,QAAS,SAClB,QAAS,IAAMhD,EAAa,CAACD,IAE7B,kBAAC,IAAD,QAGHwB,EACA1B,EACAc,OAAO6B,SAASC,SAASC,QAAQ,UAAY,IAC5C,kBAAC,IAAD,KACE,yBAAK,UAAWO,IAAOC,SACrB,yBAAK,UAAWD,IAAOE,WAAvB,aACA,yBAAK,UAAWF,IAAOG,KAAM,QAAShB,GACpC,yBAAK,IAAKiB,IAAS,IAAI,W,qBCpKrC,EAAO,QAAU,CAAC,QAAU,kBAAkB,UAAY,oBAAoB,KAAO,eAAe,QAAU,oB,qBCD9G,EAAO,QAAU,IAA0B","file":"layouts__index.js","sourcesContent":["import React, { useCallback, useState, useEffect } from 'react';\nimport { library, generateRespones, RenderList, useRegister } from 'chatbot-antd';\nimport { IRouteComponentProps, history } from 'umi';\nimport { Button, Modal } from 'antd';\nimport { CustomerServiceOutlined } from '@ant-design/icons';\nimport Draggable from 'react-draggable';\nimport Dooring from '@/assets/dooring.png';\nimport styles from './index.less';\n\nlibrary.push(\n  //语料库，push进去，也可以不用\n  {\n    text: '我是机器人',\n    reg: '你是谁',\n  },\n  {\n    text: (\n      <div>\n        <a href=\"https://github.com/MrXujiang\">@徐小夕</a>\n        <a href=\"https://github.com/yehuozhili/learnsinglespa\">@yehuozhili</a>\n      </div>\n    ),\n    useReg: /(.*?)作者是谁(.*?)/,\n  },\n);\n\nexport default function Layout({ children }: IRouteComponentProps) {\n  const [modalOpen, setModalOpen] = useState(false);\n  const callb = useCallback((v: RenderList) => {\n    setTimeout(() => {\n      //使用settimeout 更像机器人回话\n      let returnValue = generateRespones(v);\n      if (returnValue) {\n        //排除null\n        setList(prev => [...prev, { isUser: false, text: returnValue }]);\n      }\n    }, 500);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleDeploy = () => {\n    window.open('http://h5.dooring.cn/uploads/WechatIMG3_1758e9753e2.jpeg');\n  };\n  // 注册\n  const [render, setList] = useRegister(\n    modalOpen,\n    callb,\n    {\n      onOk: () => setModalOpen(false),\n      onCancel: () => setModalOpen(false),\n      title: 'h5-Dooring机器人客服',\n      width: 420,\n    },\n    {},\n    <div>\n      welcome!欢迎使用h5-Dooring，你有任何问题，都可以咨询我哦～\n      <div style={{ paddingTop: '10px', marginTop: '10px', borderTop: '1px solid #f0f0f0' }}>\n        <div>【dooring指南】</div>\n        <div>\n          <div>\n            &nbsp;&nbsp;1.{' '}\n            <a href=\"https://github.com/MrXujiang/h5-Dooring\" target=\"_blank\">\n              H5-Dooring源码地址\n            </a>\n          </div>\n          <div>\n            &nbsp;&nbsp;2.{' '}\n            <a href=\"https://github.com/MrXujiang/h5-Dooring/graphs/contributors\" target=\"_blank\">\n              贡献者列表\n            </a>\n          </div>\n          <div>\n            &nbsp;&nbsp;3. 如果复制/删除组件不生效, 请先点击需要复制/删除组件, 再右键删除/复制\n          </div>\n          <div style={{ color: 'red' }}>\n            &nbsp;&nbsp;4. 如果二维码组件无法扫码, 请适当调小中间图标尺寸\n          </div>\n          <div style={{ fontSize: '12px' }}>\n            &nbsp;&nbsp;5. dooring开源交流群(微信：Mr_xuxiaoxi)\n          </div>\n          <div style={{ fontSize: '12px', marginTop: '10px' }}>\n            &nbsp;&nbsp;\n            <Button type=\"primary\" onClick={handleDeploy}>\n              私有化部署\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>,\n  );\n\n  useEffect(() => {\n    setInterval(() => {\n      const timeout = +localStorage.getItem('tt');\n      if (timeout && timeout < Date.now()) {\n        localStorage.removeItem('tt');\n        Modal.info({\n          title: 'Dooring温馨提示',\n          content: <div>您的登录已过期, 请点击确认按钮重新登录</div>,\n          okText: '确认',\n          onOk() {\n            localStorage.removeItem('rp');\n            localStorage.removeItem('nickname');\n            history.push('/login');\n          },\n        });\n      }\n    }, 1000 * 15);\n  }, []);\n\n  const showVideo = () => {\n    Modal.info({\n      title: '秒懂H5-Dooring',\n      width: 860,\n      zIndex: 100000,\n      content: (\n        <div style={{ height: 380 }}>\n          <iframe\n            style={{ width: '100%', height: '100%' }}\n            src=\"//player.bilibili.com/player.html?aid=204342673&bvid=BV1jh411k7xs&cid=301889522&page=1\"\n            scrolling=\"no\"\n            border=\"0\"\n            frameborder=\"no\"\n            framespacing=\"0\"\n            allowfullscreen=\"true\"\n          >\n            {' '}\n          </iframe>\n        </div>\n      ),\n      okText: 'GET, 关闭',\n      onOk() {},\n    });\n  };\n\n  const hackCodeStyle =\n    window.location.pathname.indexOf('preview') < 0\n      ? { height: '100%' }\n      : { height: '100%', overflow: 'auto' };\n  return (\n    <div style={hackCodeStyle}>\n      <div\n        style={{\n          position: 'fixed',\n          right: `${modalOpen ? '-100%' : '10px'}`,\n          bottom: '16px',\n          transition: 'all 0.5s ease-in-out',\n          zIndex: 2,\n        }}\n      >\n        <Button\n          type=\"primary\"\n          style={{ padding: '0 6px' }}\n          onClick={() => setModalOpen(!modalOpen)}\n        >\n          <CustomerServiceOutlined></CustomerServiceOutlined>\n        </Button>\n      </div>\n      {render}\n      {children}\n      {window.location.pathname.indexOf('editor') > -1 && (\n        <Draggable>\n          <div className={styles.dragPay}>\n            <div className={styles.crouseBtn}>搭建技巧(可拖动)</div>\n            <div className={styles.mask} onClick={showVideo}>\n              <img src={Dooring} alt=\"\" />\n            </div>\n          </div>\n        </Draggable>\n      )}\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dragPay\":\"dragPay___n-xt0\",\"crouseBtn\":\"crouseBtn___3y0id\",\"mask\":\"mask___38Yw4\",\"toShake\":\"toShake___24Lw5\"};","module.exports = __webpack_public_path__ + \"static/dooring.cfd4ea8b.png\";"],"sourceRoot":""}